```
class IObserver
{
public:
	virtual void update(float price) = 0;
};

class Observer : public IObserver
{
public:
	Observer(const std::string& name) : name_(name) {}

	void update(float price) override {
		std::cout << name_ << "- price: " << price << std::endl;
	}

private:
	std::string name_;
};

class ISubject
{
public:
	virtual void attach(std::shared_ptr<IObserver>& observer) = 0;
	virtual void detach(std::shared_ptr<IObserver>& observer) = 0;
	virtual void notify() = 0;
};

class Subject : public ISubject
{
public:
	Subject() : price_(10.0) {}

	void set_price(float price)
	{
		price_ = price;
	}

	void attach(std::shared_ptr<IObserver> & observer) override
	{
		observers_.push_back(observer);
	}

	void detach(std::shared_ptr<IObserver>& observer) override
	{
		observers_.remove(observer);
	}

	void notify()
	{
		for (const auto & observer : observers_)
		{
			observer->update(price_);
		}
	}

private:
	double price_;
	std::list<std::shared_ptr<IObserver>> observers_;
};

void client()
{
	std::shared_ptr<Subject> p_subject(new Subject());
	std::shared_ptr<IObserver> p_observer1(new Observer("Jike"));
	std::shared_ptr<IObserver> p_observer2(new Observer("Mike"));

	p_subject->attach(p_observer1);
	p_subject->attach(p_observer2);

	p_subject->set_price(12.8);
	p_subject->notify();

	p_subject->detach(p_observer1);
	p_subject->set_price(19.0);
	p_subject->notify();
}
```

